#$Id$
CC=g++
INSTALL = install
PREFIX = /usr
libparentdir = ${PREFIX}/share/emacs/site-lisp
libdir =$(libparentdir)/emacspeak/linux-outloud
CFLAGS= -g  -fPIC  -DPIC -pedantic -ansi -Wall 
CPPFLAGS=    -DUNIX -fPIC -DPIC  -g

TTS=tcleci.so eci.ini VIAVOICE

all: tcleci.so 


tcleci.lo: tcleci.cpp
	libtool $(CC) $(CFLAGS) -c $<

tcleci.so: tcleci.lo
	libtool --mode=link $(CC) $(CFLAGS) -g -o $@ tcleci.lo -ltcl -ldl -shared

clean:
	rm -f tcleci.so tcleci.o tcleci.lo

install: tcleci.so
	if test ! -d $(libdir) ; then mkdir $(libdir); fi ; \
	chmod 755 $(libdir); \
	$(INSTALL) -m 0644 $(TTS) $(libdir)
